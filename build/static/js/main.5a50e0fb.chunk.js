(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(24),o=n.n(a),s=n(3),i=n.n(s),u=n(6),l=function(e,t){return clearTimeout(r),console.log(e),console.log(t),function(){var n=Object(u.a)(i.a.mark((function n(c){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"NEW NOTIFICATION",notification:e}),r=setTimeout((function(){c({type:"REMOVE NOTIFICATION",notification:null})}),t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW NOTIFICATION":return e=t.notification,console.log(e),e;case"REMOVE NOTIFICATION":return t.notification;default:return e}},j=n(48),b=n(31),h=n(49),p=n(39),f=n(54),O=n(22),g=n.n(O),v="/api/blogs",x=null,m={getAll:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(v);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){x="bearer ".concat(e)},create:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,g.a.post(v,t,n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:x}},e.next=3,g.a.put("".concat(v,"/").concat(t),n,r);case 3:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,g.a.delete("".concat(v,"/").concat(t),n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.create(e);case 2:r=t.sent,n({type:"NEW BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.remove(e);case 2:r=t.sent,n({type:"DELETE",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(r){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.update(t,e);case 2:c=n.sent,r({type:"LIKE",data:c,id:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL BLOGS":return e=t.data;case"NEW BLOG":return[].concat(Object(f.a)(e),[t.data]);case"LIKE":var n=t.data,r=e.find((function(e){return e.id===t.id}));console.log(r);var c=Object(p.a)(Object(p.a)({},r),{},{likes:n.likes}),a=e.map((function(e){return e.id===t.id?c:e}));return a;case"DELETE":var o=t.data;console.log(o);var s=e.filter((function(e){return e.id!==o.id}));return console.log(s),s;default:return e}},L={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N="loggedBlogappUser",T=function(){return JSON.parse(localStorage.getItem(N))};console.log(T);var S=function(e){localStorage.setItem(N,JSON.stringify(e))},C=T,E=function(e,t){return console.log(e,t),function(){var n=Object(u.a)(i.a.mark((function n(r){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L.login({username:e,password:t});case 3:c=n.sent,console.log(c),r({type:"LOGIN",data:c}),S(c),m.setToken(c.token),r(l("welcome to the blog app",5e3)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),r(l("wrong username or password",5e3)),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return e=t.data,console.log(e),e;case"LOGOUT":return e=t.data;default:return e}},B={getAll:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL USERS":return e=t.data,console.log(e),e;default:return e}},G=Object(b.combineReducers)({notification:d,blogs:I,user:A,userList:U}),D=Object(b.createStore)(G,Object(j.composeWithDevTools)(Object(b.applyMiddleware)(h.a)));console.log(D.getState());var W=n(18),R=n(23),F=n(9),J=n(19),M=n(1),z=function(){return Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{children:"Welcome to the BlogApp"}),Object(M.jsx)("h2",{children:"Checking the github status"})]})},P=n(107),K=n(89),V=n(108),Y=n(109),q=n(110),H=n(111),Q=function(e){var t=e.blogs;return Object(M.jsx)("div",{children:Object(M.jsx)(P.a,{component:K.a,children:Object(M.jsx)(V.a,{children:Object(M.jsx)(Y.a,{children:t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(M.jsx)(q.a,{children:Object(M.jsx)(H.a,{children:Object(M.jsx)(J.b,{to:"/blogs/".concat(e.id),children:e.title})})},e.id)}))})})})})},X=function(e){var t=e.match,n=e.blogs,r=e.user,c=Object(W.b)(),a=t?n.find((function(e){return e.id===t.params.id})):null;console.log(r),console.log(a);var o=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=a.id,n={user:a.user.id,likes:a.likes+1,author:a.author,title:a.title,url:a.url},c(k(n,t)),c(l("You have voted ".concat(n.title),5e3))}catch(r){c(l(r.message,5e3))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.id,!0===window.confirm("Remove blog  ".concat(a.title," by ").concat(a.author)))try{c(y(t)),c(l("".concat(a.title," by ").concat(a.author," deleted"),5e3))}catch(n){c(l(n.message,5e3))}else c(l("Nothing was deleted",5e3));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a?Object(M.jsxs)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:[Object(M.jsxs)("h2",{children:[" ",Object(M.jsx)("span",{children:a.title})," ",a.author]}),Object(M.jsx)("a",{href:a.url,target:"blank",children:a.url}),Object(M.jsxs)("p",{children:[a.likes," likes"]}),Object(M.jsx)("button",{id:"likeButton",style:{backgroundColor:"skyblue"},onClick:o,children:"like"}),Object(M.jsxs)("p",{children:["Added by ",a.user.name]}),r.name===a.user.name?Object(M.jsx)("button",{style:{backgroundColor:"red"},onClick:s,children:"remove"}):""]}):null},Z=function(e){var t=e.users;return console.log(t),null===t?Object(M.jsx)("div",{}):Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{children:"Users"}),Object(M.jsx)(P.a,{component:K.a,children:Object(M.jsx)(V.a,{children:Object(M.jsx)(Y.a,{children:t.map((function(e){return Object(M.jsxs)(q.a,{children:[Object(M.jsx)(H.a,{children:Object(M.jsx)(J.b,{to:"/users/".concat(e.id),children:e.name})}),Object(M.jsx)(H.a,{children:e.blogs.length})]},e.id)}))})})})]})},$=function(e){var t=e.userList,n=e.match;console.log(t),console.log(n.params.id);var r=n?t.find((function(e){return e.id===n.params.id})):null;return console.log(r),r?Object(M.jsxs)("div",{children:[Object(M.jsxs)("h1",{children:[r.name," ","'s blog",":"]}),Object(M.jsx)("h3",{children:"Added blogs:"}),Object(M.jsx)("ul",{children:r.blogs.map((function(e){return Object(M.jsx)("li",{children:e.title},e.id)}))})]}):null},_=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,r=e.handlePasswordChange,c=e.username,a=e.password;return Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{children:"Login"}),Object(M.jsxs)("form",{onSubmit:t,children:[Object(M.jsxs)("div",{children:["username",Object(M.jsx)("input",{id:"username",value:c,onChange:n})]}),Object(M.jsxs)("div",{children:["password",Object(M.jsx)("input",{id:"password",type:"Password",name:"password",value:a,onChange:r})]}),Object(M.jsx)("button",{id:"login-button",type:"submit",children:"login"})]})]})};function ee(e){var t=e.createBlog,n=Object(c.useState)(""),r=Object(R.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(""),i=Object(R.a)(s,2),u=i[0],l=i[1],d=Object(c.useState)(""),j=Object(R.a)(d,2),b=j[0],h=j[1];return console.log(a),console.log(u),console.log(b),Object(M.jsx)("div",{className:"formDiv",children:Object(M.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:a,author:u,url:b}),o(""),l(""),h("")},children:[Object(M.jsxs)("p",{children:["title:",Object(M.jsx)("input",{id:"title",onChange:function(e){e.preventDefault(),o(e.target.value)}})]}),Object(M.jsxs)("p",{children:["Author:",Object(M.jsx)("input",{id:"author",onChange:function(e){l(e.target.value)}})]}),Object(M.jsxs)("p",{children:["Url:",Object(M.jsx)("input",{id:"url",onChange:function(e){h(e.target.value)}})]}),Object(M.jsx)("p",{children:Object(M.jsx)("button",{id:"save",type:"submit",children:"save"})})]})})}n(87);function te(){var e=Object(W.c)((function(e){return e.notification}));return null===e?Object(M.jsx)("div",{children:""}):e.includes("a new blog")||e.includes("has logged ")||e.includes("have voted")?Object(M.jsx)("div",{className:"addMessage",children:Object(M.jsx)("p",{children:e})}):Object(M.jsx)("div",{className:"error",children:Object(M.jsx)("p",{children:e})})}var ne=function(e){var t=Object(c.useState)(!1),n=Object(R.a)(t,2),r=n[0],a=n[1],o={display:r?"none":""},s={display:r?"":"none"},i=function(){a(!r)};return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{style:o,children:Object(M.jsx)("button",{onClick:i,children:e.buttonLabel})}),Object(M.jsxs)("div",{style:s,children:[e.children,Object(M.jsx)("button",{onClick:i,children:"cancel"})]})]})};ne.displayName="Togglable";var re=ne,ce=n(112),ae=n(113),oe=n(114),se=function(){var e=Object(c.useState)(""),t=Object(R.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(R.a)(a,2),s=o[0],d=o[1],j=Object(W.b)(),b=Object(W.c)((function(e){return e.user}));console.log(b);var h=Object(W.c)((function(e){return e.blogs})),p=Object(W.c)((function(e){return e.userList}));console.log(p),Object(c.useEffect)((function(){j(function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getAll();case 2:n=e.sent,t({type:"INITIAL BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j]),Object(c.useEffect)((function(){var e,t=C();console.log(t),j((e=t,function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(e),null!==e&&m.setToken(e.token),t.next=4,n({type:"LOGIN",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[j]),Object(c.useEffect)((function(){j(function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAll();case 2:n=e.sent,t({type:"INITIAL USERS",data:n}),console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j]),console.log(p);var f=Object(F.g)("/users/:id"),O=Object(F.g)("/blogs/:id"),g=Object(F.f)(),v=function(){var e=Object(u.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=j(E(n,s)),console.log(c),t.preventDefault(),r(""),d(""),g.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.title&&t.author&&(j(w(t)),j(l("a new blog '".concat(t.title,"' by ").concat(t.author," added!"),5e3)))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===b?Object(M.jsxs)("div",{children:[Object(M.jsx)(te,{}),Object(M.jsx)(re,{buttonLabel:"log in",children:Object(M.jsx)(_,{username:n,password:s,handleUsernameChange:function(e){var t=e.target;return r(t.value)},handlePasswordChange:function(e){var t=e.target;return d(t.value)},handleSubmit:v})})]}):null!==b?Object(M.jsxs)("div",{children:[Object(M.jsx)(ce.a,{position:"static",children:Object(M.jsxs)(ae.a,{style:{padding:"10"},children:[Object(M.jsx)(oe.a,{color:"inherit",component:J.b,to:"/",children:"home"}),Object(M.jsx)(oe.a,{color:"inherit",component:J.b,to:"/blogs",children:"Blogs"}),Object(M.jsx)(oe.a,{color:"inherit",component:J.b,to:"/users",children:"users"}),Object(M.jsxs)("em",{children:[b.name," logged in"]}),Object(M.jsx)(oe.a,{onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),j(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",data:null}),t(l("logged out",5e3));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"logout"})]})}),Object(M.jsx)("div",{children:Object(M.jsx)(te,{})}),Object(M.jsxs)(F.c,{children:[Object(M.jsx)(F.a,{path:"/users/:id",children:Object(M.jsx)($,{match:f,userList:p})}),Object(M.jsx)(F.a,{path:"/blogs/:id",children:Object(M.jsx)(X,{match:O,user:b,blogs:h})}),Object(M.jsxs)(F.a,{path:"/blogs",children:[Object(M.jsx)("h1",{children:"Blogs:"}),Object(M.jsx)("h2",{children:"Create new Blog"}),Object(M.jsx)(re,{buttonLabel:"create blog",children:Object(M.jsx)(ee,{createBlog:x,user:b})}),Object(M.jsx)(Q,{user:b,blogs:h})]}),Object(M.jsxs)(F.a,{path:"/users",children:[" ",Object(M.jsx)(Z,{users:p})]}),Object(M.jsx)(F.a,{path:"/",children:Object(M.jsx)(z,{})})]})]}):void 0};o.a.render(Object(M.jsx)(W.a,{store:D,children:Object(M.jsx)(J.a,{children:Object(M.jsx)(se,{})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.5a50e0fb.chunk.js.map